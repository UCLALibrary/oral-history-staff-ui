{% extends 'oh_staff_ui/base.html' %}
{% load django_bootstrap5 %}

{% block content %}
<table class="header-metadata caption-top">
  <caption>Item Information</caption>
  <tr>
      <td>Title</td>
      <td>{{ item.title }}</td>
  </tr>
  <tr>
      <td>ARK</td>
      <td>{{ item.ark }}</td>
  </tr>
  <tr>
      <td>Parent</td>
      <td>{% if item.parent %}
          <a href="{% url 'edit_item' item.parent.id %}">{{ item.parent }}</a>
          {% else %}
          {{ item.parent }}
          {% endif %}</td>
  </tr>
  <tr>
      <td>Created</td>
      <td>{{ item.create_date }} by {{ item.created_by }}</td>
  </tr>
  <tr>
      <td>Updated</td>
      <td>{{ item.last_modified_date }} by {{ item.last_modified_by }}</td>
  </tr>
  <tr>
      <td>Item Actions</td>
      <td>
        <a href="{% url 'edit_item' item.id %}">View metadata</a>
      </td>
  </tr>
</table>
{% if files %}
<hr>
<table class="header-metadata caption-top">
  <caption>File Information</caption>
  <tr>
    <th>File Type</th>
    <th>Added by</th>
    <th>Original name</th>
    <th>New name & location</th>
    <th>Size</th>
    <th>Sequence</th>
  </tr>
  {% for file in files %}
  <tr>
    <td>{{ file.file_type }}</td>
    <td>{{ file.create_date }} by {{ file.created_by }}</td>
    <td>{{ file.original_file_name }}</td>
    <td>
      {% if file.file_url %}
      <a href="{{ file.file_url }}">{{ file.file_name_only }}</a>
      {% else %}
      {{ file.file_name_only }}
      {% endif %}
    </td>
    <td>{{ file.file_size|floatformat:"g" }} bytes</td>
    <td>{{ file.sequence }}</td>
  </tr>
  {% endfor %}
</table>
{% endif %}
<hr>
{% if messages %}
<div class="box">
{% for message in messages %}
  <div>{{ message }}</div>
{% endfor %}
</div>
{% endif %}

<form name="upload_file_form" method="POST" enctype="multipart/form-data" onsubmit="disable_upload_button(this);">
    {% csrf_token %}
    <table>
      <tr>
          <td>{% bootstrap_field form.file_type layout="floating" %}</td>
          <td></td>
          <td>{% bootstrap_field form.file_name layout="floating" %}</td>
      </tr>
  </table>
    {% bootstrap_button button_type="submit" content="Upload" %}
</form>
{% endblock %}
